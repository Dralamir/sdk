<?xml version="1.0" encoding="UTF-8"?>
<!--

    OpenZoom
    Copyright (c) 2007-2009, Daniel Gasienica <daniel@gasienica.ch>

-->
<project name="OpenZoom" default="lib" basedir="../">
	
	<property file="build/build.properties"/>
	
    <property name="openzoom.lib" location="${basedir}/lib"/>
    <property name="openzoom.src" location="${basedir}/src" />
    <property name="openzoom.doc" location="${basedir}/docs" />
    <property name="openzoom.doc.out" location="${basedir}/build/docs" />
    <property name="openzoom.swc.out" location="${basedir}/build/lib" />
	
    <target name="doc" depends="clean, asdoc" description="Build documentation"/>
	
    <target name="clean">
        <delete dir="${openzoom.doc.out}" failOnError="false" includeEmptyDirs="true"/>
        <mkdir dir="${openzoom.doc.out}"/>
        <delete dir="${openzoom.swc.out}" failOnError="false" includeEmptyDirs="true"/>
        <mkdir dir="${openzoom.swc.out}"/>
    </target>

    <target name="asdoc">
        <exec executable="${flex_sdk.asdoc}" failonerror="true">
            <arg line='-source-path ${openzoom.src}'/>
            <arg line='-doc-sources ${openzoom.src}/org/.'/>
            <arg line='-library-path ${openzoom.lib}'/>
            <arg line='-library-path ${flex_sdk.dir}/frameworks/libs/'/>
            <arg line='-window-title "OpenZoom"'/>
            <arg line='-templates-path ${openzoom.doc}/templates'/>
            <arg line='-output ${openzoom.doc.out}'/>
        </exec>
    </target>

    <target name="lib" depends="clean">
        <exec executable="${flex_sdk.compc}" failonerror="true">
            <arg line='-source-path ${openzoom.src}'/>
            <arg line='-library-path ${openzoom.lib}'/>
            <arg line='-library-path ${flex_sdk.dir}/frameworks/libs/'/>
            <arg line="-library-path ${flex_sdk.dir}/frameworks/locale/en_US"/>
            <arg line='-namespace http://ns.openzoom.org/2008 ${openzoom.src}/manifest.xml'/>
            <arg line='-include-namespaces http://ns.openzoom.org/2008'/>
            <arg line='-output ${openzoom.swc.out}/openzoom.swc'/>
        </exec>
    </target>
</project>